<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[技ログ]]></title>
  <link href="http://blog.chacrue.com/atom.xml" rel="self"/>
  <link href="http://blog.chacrue.com/"/>
  <updated>2014-01-21T22:59:27+09:00</updated>
  <id>http://blog.chacrue.com/</id>
  <author>
    <name><![CDATA[R.Asaka]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Octopressの言語指定を日本語にする]]></title>
    <link href="http://blog.chacrue.com/posts/2014/site-language-change/"/>
    <updated>2014-01-21T22:17:08+09:00</updated>
    <id>http://blog.chacrue.com/posts/2014/site-language-change</id>
    <content type="html"><![CDATA[<p>Octopressの言語指定はデフォルトで英語になっているため、
日本語の記事を書いていても、Chromeでアクセスすると英語サイト判定されて翻訳するかどうかの通知が出てしまう。</p>

<p>→source/_includes/head.html でlang属性を修正すれば良い</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'>$ vim source/_includes/head.html
</span><span class='line'><span class="gd">-&lt;!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]&gt;&lt;!--&gt;&lt;html class=&quot;no-js&quot; lang=&quot;en&quot;&gt;&lt;!--&lt;![endif]--&gt;</span>
</span><span class='line'><span class="gi">+&lt;!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]&gt;&lt;!--&gt;&lt;html class=&quot;no-js&quot; lang=&quot;ja&quot;&gt;&lt;!--&lt;![endif]--&gt;</span>
</span></code></pre></td></tr></table></div></figure>




<iframe src="http://rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=FFFFFF&IS2=1&nou=1&bg1=FFFFFF&fc1=0A0808&lc1=0099FF&t=chacrue-22&o=9&p=8&l=as1&m=amazon&f=ifr&ref=tf_til&asins=4798129674" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Octopressで日本語の記事が書けない]]></title>
    <link href="http://blog.chacrue.com/posts/2014/octopress-japanese-post/"/>
    <updated>2014-01-19T18:56:15+09:00</updated>
    <id>http://blog.chacrue.com/posts/2014/octopress-japanese-post</id>
    <content type="html"><![CDATA[<p>Octopressで一つ記事を書いたので、
試しにアップしようとしたところ、以下のエラーが出てgenerate出来ない。</p>

<p>※OSはCentOS 6.5で必要最小限のパッケージしか入れていない。<br/>
<a href="https://github.com/2creatives/vagrant-centos/releases/download/v6.5.1/centos65-x86_64-20131205.box">https://github.com/2creatives/vagrant-centos/releases/download/v6.5.1/centos65-x86_64-20131205.box</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>bundle <span class="nb">exec </span>rake generate
</span><span class='line'><span class="c">## Generating Site with Jekyll</span>
</span><span class='line'>identical <span class="nb">source</span>/stylesheets/screen.css
</span><span class='line'>---
</span><span class='line'>Configuration from /app/rails_projects/blog/rasaka.github.io/_config.yml
</span><span class='line'>Building site: <span class="nb">source</span> -&gt; public
</span><span class='line'>YAML Exception reading 2014-01-13-nfs-mount-error.markdown: invalid byte sequence in US-ASCII
</span><span class='line'>/app/rails_projects/blog/rasaka.github.io/plugins/backtick_code_block.rb:13:in <span class="sb">`</span>gsub<span class="s1">&#39;: invalid byte sequence in US-ASCII (ArgumentError)</span>
</span><span class='line'><span class="s1">  from /app/rails_projects/blog/rasaka.github.io/plugins/backtick_code_block.rb:13:in `render_code_block&#39;</span>
</span><span class='line'>  from /app/rails_projects/blog/rasaka.github.io/plugins/octopress_filters.rb:12:in <span class="sb">`</span>pre_filter<span class="s1">&#39;</span>
</span><span class='line'><span class="s1">  from /app/rails_projects/blog/rasaka.github.io/plugins/octopress_filters.rb:28:in `pre_render&#39;</span>
</span><span class='line'>  from /app/rails_projects/blog/rasaka.github.io/plugins/post_filters.rb:112:in <span class="sb">`</span>block in pre_render<span class="s1">&#39;</span>
</span><span class='line'><span class="s1">  from /app/rails_projects/blog/rasaka.github.io/plugins/post_filters.rb:111:in `each&#39;</span>
</span><span class='line'>  from /app/rails_projects/blog/rasaka.github.io/plugins/post_filters.rb:111:in <span class="sb">`</span>pre_render<span class="s1">&#39;</span>
</span><span class='line'><span class="s1">  from /app/rails_projects/blog/rasaka.github.io/plugins/post_filters.rb:166:in `do_layout&#39;</span>
</span><span class='line'>  from /home/vagrant/.rbenv/versions/2.1.0/gemsets/blog-octopress/gems/jekyll-0.12.1/lib/jekyll/post.rb:195:in <span class="sb">`</span>render<span class="s1">&#39;</span>
</span><span class='line'><span class="s1">  from /home/vagrant/.rbenv/versions/2.1.0/gemsets/blog-octopress/gems/jekyll-0.12.1/lib/jekyll/site.rb:200:in `block in render&#39;</span>
</span><span class='line'>  from /home/vagrant/.rbenv/versions/2.1.0/gemsets/blog-octopress/gems/jekyll-0.12.1/lib/jekyll/site.rb:199:in <span class="sb">`</span>each<span class="s1">&#39;</span>
</span><span class='line'><span class="s1">  from /home/vagrant/.rbenv/versions/2.1.0/gemsets/blog-octopress/gems/jekyll-0.12.1/lib/jekyll/site.rb:199:in `render&#39;</span>
</span><span class='line'>  from /home/vagrant/.rbenv/versions/2.1.0/gemsets/blog-octopress/gems/jekyll-0.12.1/lib/jekyll/site.rb:41:in <span class="sb">`</span>process<span class="s1">&#39;</span>
</span><span class='line'><span class="s1">  from /home/vagrant/.rbenv/versions/2.1.0/gemsets/blog-octopress/gems/jekyll-0.12.1/bin/jekyll:264:in `&lt;top (required)&gt;&#39;</span>
</span><span class='line'>  from /home/vagrant/.rbenv/versions/2.1.0/gemsets/blog-octopress/bin/jekyll:23:in <span class="sb">`</span>load<span class="s1">&#39;</span>
</span><span class='line'><span class="s1">  from /home/vagrant/.rbenv/versions/2.1.0/gemsets/blog-octopress/bin/jekyll:23:in `&lt;main&gt;&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>現状のロケールを確認。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>locale -a
</span><span class='line'>locale: Cannot <span class="nb">set </span>LC_CTYPE to default locale: No such file or directory
</span><span class='line'>locale: Cannot <span class="nb">set </span>LC_MESSAGES to default locale: No such file or directory
</span><span class='line'>locale: Cannot <span class="nb">set </span>LC_COLLATE to default locale: No such file or directory
</span><span class='line'>C
</span><span class='line'>POSIX
</span><span class='line'>en_US
</span><span class='line'>en_US.iso88591
</span><span class='line'>en_US.iso885915
</span><span class='line'>en_US.utf8
</span></code></pre></td></tr></table></div></figure>


<p>ja_JP.utf8を利用出来るようにする。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>sudo localedef -f UTF-8 -i ja_JP ja_JP.utf8
</span><span class='line'><span class="nv">$ </span>locale -a
</span><span class='line'>C
</span><span class='line'>POSIX
</span><span class='line'>en_US
</span><span class='line'>en_US.iso88591
</span><span class='line'>en_US.iso885915
</span><span class='line'>en_US.utf8
</span><span class='line'>ja_JP.utf8
</span><span class='line'><span class="nv">$ </span>locale
</span><span class='line'><span class="nv">LANG</span><span class="o">=</span>ja_JP.utf8
</span><span class='line'><span class="nv">LC_CTYPE</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_NUMERIC</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_TIME</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_COLLATE</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_MONETARY</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_MESSAGES</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_PAPER</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_NAME</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_ADDRESS</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_TELEPHONE</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_MEASUREMENT</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_IDENTIFICATION</span><span class="o">=</span><span class="s2">&quot;ja_JP.utf8&quot;</span>
</span><span class='line'><span class="nv">LC_ALL</span><span class="o">=</span>
</span></code></pre></td></tr></table></div></figure>


<p>/etc/sysconfig/i18nを修正。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'>$ vim /etc/sysconfig/i18n
</span><span class='line'><span class="gd">-LANG=&quot;en_US.UTF-8&quot;</span>
</span><span class='line'><span class="gi">+LANG=&quot;ja_JP.utf8&quot;</span>
</span></code></pre></td></tr></table></div></figure>


<p>/etc/sysconfig/i18nを再読み込みで解決。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>. /etc/sysconfig/i18n
</span></code></pre></td></tr></table></div></figure>




<iframe src="http://rcm-fe.amazon-adsystem.com/e/cm?t=chacrue-22&o=9&p=8&l=as1&asins=B00ENEGXUU&nou=1&ref=tf_til&fc1=0A0808&IS2=1&lt1=_blank&m=amazon&lc1=0099FF&bc1=000000&bg1=FFFFFF&f=ifr" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Vagrant packageで複製したboxのSSHレスポンスが遅い]]></title>
    <link href="http://blog.chacrue.com/posts/2014/slow-response-vagrant/"/>
    <updated>2014-01-17T00:14:55+09:00</updated>
    <id>http://blog.chacrue.com/posts/2014/slow-response-vagrant</id>
    <content type="html"><![CDATA[<p>構築済みのVagrant boxをvagrant packageで複製し、
IPだけ変更して起動したところ、eth1が起動しなかった。</p>

<p>加えて、問題対処後に起動するも、SSHのレスポンスが遅かった。</p>

<h3>box複製</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Mac<span class="nv">$ </span>vagrant package
</span><span class='line'>Mac<span class="nv">$ </span>vagrant box add copy_box package.box
</span><span class='line'>Mac<span class="nv">$ </span>rm package.box
</span></code></pre></td></tr></table></div></figure>


<p>複製元のVagrantfileからIPだけ変更して起動。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gd">-  config.vm.network :private_network, ip: &quot;192.168.33.11&quot;</span>
</span><span class='line'><span class="gi">+  config.vm.network :private_network, ip: &quot;192.168.33.12&quot;</span>
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'>Mac$ vagrant up
</span></code></pre></td></tr></table></div></figure>


<h3>eth1が起動しない</h3>

<p>起動時にeth1が存在しないとのエラーが発生。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'>[default] Configuring and enabling network interfaces...
</span><span class='line'>The following SSH command responded with a non-zero exit status.
</span><span class='line'>Vagrant assumes that this means the command failed!
</span><span class='line'>
</span><span class='line'>ARPCHECK=no /sbin/ifup eth1 2&gt; /dev/null
</span><span class='line'>
</span><span class='line'>Stdout from the command:
</span><span class='line'>
</span><span class='line'>Device eth1 does not seem to be present, delaying initialization.
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>Stderr from the command:
</span></code></pre></td></tr></table></div></figure>


<p>下記を削除してからvagrant packageをやり直す。<br/>
<a href="https://github.com/mitchellh/vagrant/issues/1777">https://github.com/mitchellh/vagrant/issues/1777</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Vagrant<span class="nv">$ </span>rm /etc/udev/rules.d/70-persistent-net.rules
</span></code></pre></td></tr></table></div></figure>




<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Mac<span class="nv">$ </span>vagrant destroy
</span><span class='line'>Mac<span class="nv">$ </span>vagrant package
</span><span class='line'>Mac<span class="nv">$ </span>vagrant box remove copy_box
</span><span class='line'>Mac<span class="nv">$ </span>vagrant box add copy_box package.box
</span><span class='line'>Mac<span class="nv">$ </span>rm package.box
</span><span class='line'>Mac<span class="nv">$ </span>vagrant up
</span></code></pre></td></tr></table></div></figure>


<p>eth1が起動出来た。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="nv">$ </span>ifconfig eth1
</span><span class='line'>eth1      Link encap:Ethernet  HWaddr 00:00:00:00:00:00
</span><span class='line'>          inet addr:192.168.33.12  Bcast:192.168.33.255  Mask:255.255.255.0
</span><span class='line'><span class="nv">$ </span>ping 192.168.33.1 -c 1
</span><span class='line'>PING 192.168.33.1 <span class="o">(</span>192.168.33.1<span class="o">)</span> 56<span class="o">(</span>84<span class="o">)</span> bytes of data.
</span><span class='line'>64 bytes from 192.168.33.1: <span class="nv">icmp_seq</span><span class="o">=</span>1 <span class="nv">ttl</span><span class="o">=</span>64 <span class="nb">time</span><span class="o">=</span>0.179 ms
</span><span class='line'>
</span><span class='line'>--- 192.168.33.1 ping statistics ---
</span><span class='line'>1 packets transmitted, 1 received, 0% packet loss, <span class="nb">time </span>0ms
</span><span class='line'>rtt min/avg/max/mdev <span class="o">=</span> 0.179/0.179/0.179/0.000 ms
</span></code></pre></td></tr></table></div></figure>


<h3>SSHレスポンスが遅い</h3>

<p>ただし、SSHのレスポンスが遅い。キーを押下しても一瞬待ってから表示される。<br/>
→google TOPへcurlしてみたが、通常と変わらない。<br/>
→ネットワーク自体は遅くない</p>

<p>Virtualboxで該当仮想マシンの設定を確認すると、下記のエラーが発生していた。</p>

<p><img src="http://blog.chacrue.com/images/screenshots/virtualbox-error-1.png" alt="virtualbox-error-1" /></p>

<p>→VagrantfileでI/O APIC有効化設定。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'>  config.vm.provider :virtualbox do |vb|
</span><span class='line'>    vb.customize [&quot;modifyvm&quot;, :id, &quot;--memory&quot;, &quot;1024&quot;]
</span><span class='line'>    vb.customize [&quot;modifyvm&quot;, :id, &quot;--cpus&quot;, 2]
</span><span class='line'><span class="gi">+   vb.customize [&quot;modifyvm&quot;, :id, &quot;--ioapic&quot;, &quot;on&quot;]</span>
</span><span class='line'>  end
</span></code></pre></td></tr></table></div></figure>


<p>vagrant reloadで再起動→SSHのレスポンスが通常通りとなった。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Mac<span class="nv">$ </span>vagrant reload
</span></code></pre></td></tr></table></div></figure>




<iframe src="http://rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&nou=1&bg1=FFFFFF&fc1=0A0808&lc1=0099FF&t=chacrue-22&o=9&p=8&l=as1&m=amazon&f=ifr&ref=qf_sp_asin_til&asins=B00F418SQ8" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[VagrantでNFSマウント出来ない]]></title>
    <link href="http://blog.chacrue.com/posts/2014/nfs-mount-error/"/>
    <updated>2014-01-13T19:01:58+09:00</updated>
    <id>http://blog.chacrue.com/posts/2014/nfs-mount-error</id>
    <content type="html"><![CDATA[<p>ホストとの共有は <a href="http://mitchellh.com/comparing-filesystem-performance-in-virtual-machines">NFSの方がパフォーマンスが良い</a> らしいので、<br/>
Vagrantfileで設定してみたところ、エラーが発生してNFSマウント出来ない。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Mac<span class="nv">$ </span>vim Vagrantfile
</span><span class='line'>config.vm.synced_folder <span class="s2">&quot;/Users/xxx/app/&quot;</span>, <span class="s2">&quot;/app/&quot;</span>, nfs: <span class="nb">true</span>
</span></code></pre></td></tr></table></div></figure>


<p>下記エラーが発生。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Mac<span class="nv">$ </span>vagrant up
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Exporting NFS shared folders...
</span><span class='line'>NFS is reporting that your exports file is invalid. Vagrant does
</span><span class='line'>this check before making any changes to the file. Please correct
</span><span class='line'>the issues below and execute <span class="s2">&quot;vagrant reload&quot;</span>:
</span><span class='line'>
</span><span class='line'>Can<span class="err">&#39;</span>t open /etc/exports
</span></code></pre></td></tr></table></div></figure>


<p>ホスト側で/etc/exportsを作成（空ファイルでよい）</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Mac<span class="nv">$ </span>sudo touch /etc/exports
</span></code></pre></td></tr></table></div></figure>


<p>NFSは起動していた。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Mac<span class="nv">$ </span>sudo nfsd status
</span><span class='line'>nfsd service is enabled
</span><span class='line'>nfsd is running <span class="o">(</span>pid 3697, 8 threads<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>起動していなかった場合は以下を実行。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Mac<span class="nv">$ </span>sudo nfsd <span class="nb">enable</span>
</span></code></pre></td></tr></table></div></figure>


<p>別エラー発生。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Mac<span class="nv">$ </span>vagrant reload
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Exporting NFS shared folders...
</span><span class='line'>Preparing to edit /etc/exports. Administrator privileges will be required...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Mounting NFS shared folders...
</span><span class='line'>The following SSH <span class="nb">command </span>responded with a non-zero <span class="nb">exit </span>status.
</span><span class='line'>Vagrant assumes that this means the <span class="nb">command </span>failed!
</span><span class='line'>
</span><span class='line'>mount -o <span class="s1">&#39;vers=3,udp&#39;</span> 192.168.33.1:<span class="s1">&#39;/Users/xxx/app&#39;</span> /app
</span><span class='line'>
</span><span class='line'>Stdout from the <span class="nb">command</span>:
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'>Stderr from the <span class="nb">command</span>:
</span><span class='line'>
</span><span class='line'>mount.nfs: access denied by server <span class="k">while </span>mounting 192.168.33.1:/Users/xxx/app
</span></code></pre></td></tr></table></div></figure>


<p>sudo nfsd checkexports→vagrant reloadで解決<br/>
<a href="https://github.com/mitchellh/vagrant/issues/1744">https://github.com/mitchellh/vagrant/issues/1744</a></p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Mac<span class="nv">$ </span>sudo nfsd checkexports
</span><span class='line'>Mac<span class="nv">$ </span>vagrant reload
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Exporting NFS shared folders...
</span><span class='line'>Preparing to edit /etc/exports. Administrator privileges will be required...
</span><span class='line'><span class="o">[</span>default<span class="o">]</span> Mounting NFS shared folders...
</span></code></pre></td></tr></table></div></figure>


<p>起動後、マウント出来ていることを確認。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Vagrant<span class="nv">$ </span>df -h /app
</span><span class='line'>Filesystem                     Size  Used Avail Use% Mounted on
</span><span class='line'>192.168.33.1:/Users/xxx/app  466G   48G  417G  11% /app
</span></code></pre></td></tr></table></div></figure>


<h3>バージョン</h3>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'>Mac<span class="nv">$ </span>vagrant --version
</span><span class='line'>Vagrant 1.4.1
</span><span class='line'>Mac<span class="nv">$ </span>sw_vers
</span><span class='line'>ProductName:  Mac OS X
</span><span class='line'>ProductVersion: 10.9.1
</span><span class='line'>BuildVersion: 13B3116
</span><span class='line'>
</span><span class='line'>Vagrant<span class="nv">$ </span>cat /etc/redhat-release
</span><span class='line'>CentOS release 6.5 <span class="o">(</span>Final<span class="o">)</span>
</span></code></pre></td></tr></table></div></figure>


<h3>VagrantのBox</h3>

<p><a href="https://github.com/2creatives/vagrant-centos/releases/download/v6.5.1/centos65-x86_64-20131205.box">https://github.com/2creatives/vagrant-centos/releases/download/v6.5.1/centos65-x86_64-20131205.box</a></p>

<iframe src="http://rcm-fe.amazon-adsystem.com/e/cm?lt1=_blank&bc1=000000&IS2=1&nou=1&bg1=FFFFFF&fc1=0A0808&lc1=0099FF&t=chacrue-22&o=9&p=8&l=as1&m=amazon&f=ifr&ref=qf_sp_asin_til&asins=B00F418SQ8" style="width:120px;height:240px;" scrolling="no" marginwidth="0" marginheight="0" frameborder="0"></iframe>

]]></content>
  </entry>
  
</feed>
